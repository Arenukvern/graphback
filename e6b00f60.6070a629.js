/*! For license information please see e6b00f60.6070a629.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{204:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return u})),n.d(t,"default",(function(){return p}));var r=n(1),o=n(6),a=(n(221),n(220)),c={id:"config",title:"Config"},i={id:"intro/config",title:"Config",description:"Graphback can generate source code, migrate your database or start fully functional server basing just on your GraphQL Model.",source:"@site/../docs/intro/config.md",permalink:"/docs/next/intro/config",editUrl:"https://github.com/aerogear/graphback/edit/master/website/../docs/intro/config.md",version:"next",sidebar:"docs",previous:{title:"Data Model",permalink:"/docs/next/intro/datamodel"},next:{title:"Graphback CRUD Specification",permalink:"/docs/next/crud/crudspec"}},u=[{value:"Configuration",id:"configuration",children:[{value:"Changing CRUD configuration per type",id:"changing-crud-configuration-per-type",children:[]}]},{value:"Database Migrations",id:"database-migrations",children:[]}],l={rightToc:u};function p(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Graphback can generate source code, migrate your database or start fully functional server basing just on your GraphQL Model.\nGraphback Config allows you to control and configure all those use cases for your own needs. "),Object(a.b)("p",null,"The Core of Graphback will take your GraphQL Schema types annotated by ",Object(a.b)("inlineCode",{parentName:"p"},"model")," and perform various operations on them like:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Code generation"),Object(a.b)("li",{parentName:"ul"},"Database migrations"),Object(a.b)("li",{parentName:"ul"},"InMemory GraphQL API. ")),Object(a.b)("p",null,"All those operations could be controlled by ",Object(a.b)("inlineCode",{parentName:"p"},"crud")," flags that enable or disable various data access methods in plugins and runtime.\nThese include ",Object(a.b)("inlineCode",{parentName:"p"},"create"),", ",Object(a.b)("inlineCode",{parentName:"p"},"update"),", ",Object(a.b)("inlineCode",{parentName:"p"},"delete"),", ",Object(a.b)("inlineCode",{parentName:"p"},"find")," and ",Object(a.b)("inlineCode",{parentName:"p"},"findAll"),"."),Object(a.b)("h2",{id:"configuration"},"Configuration"),Object(a.b)("p",null,"Graphback allows you to customize all processes by using the open configuration standard ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://graphql-config.com"}),"GraphQL Config"),"."),Object(a.b)("p",null,"Each project needs to have a ",Object(a.b)("inlineCode",{parentName:"p"},".graphqlrc.yml")," file available in the root folder. In new projects this will be added for you. For existing projects you can run ",Object(a.b)("inlineCode",{parentName:"p"},"graphback config")," to generate one for you - see ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/existingproject"}),"Adding to existing project"),"."),Object(a.b)("p",null,"Typical configuration looks like this:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"## Schema is not used by graphback but it is required by graphql-config and can be used by other extensions\n## Usually it should match the Graphback schema generator plugin\nschema: ./server/src/schema/*.graphql\n## Documents are not used by graphback but it is required by graphql-config and can be used by other extensions\n## Usually it should match the Graphback client generator plugin\ndocuments: ./client/src/graphql/**/*.graphql\nextensions:\n  # Graphback configuration\n  graphback:\n    ##  Path to file that contains GraphQL schema that will be processed by Graphback\n    ## Can be an array of paths too\n    model: ./model/**/*.graphql\n    ## Global flags for CRUD methods that will be used in plugins\n    crud:\n      create: true\n      update: true\n      findAll: true\n      find: true\n      delete: true\n      subCreate: true\n      subUpdate: true\n      subDelete: true\n    ## List of the codegen plugins \n    plugins:\n        graphback-schema:\n          format: graphql\n          outputPath: ./server/src/schema\n        graphback-client:\n          format: 'graphql'\n          outputPath: ./client/src/graphql\n        graphback-resolvers:\n          format: ts\n          outputPath: ./server/src/resolvers\n")),Object(a.b)("p",null,"Changing ",Object(a.b)("inlineCode",{parentName:"p"},"crud")," flags and running ",Object(a.b)("inlineCode",{parentName:"p"},"graphback generate")," will update the ",Object(a.b)("inlineCode",{parentName:"p"},"schema")," and ",Object(a.b)("inlineCode",{parentName:"p"},"resolvers")," using the latest config."),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},Object(a.b)("strong",{parentName:"p"},"Note"),": For subscriptions, the user needs to change the value of the respective operations to ",Object(a.b)("inlineCode",{parentName:"p"},"true"),". For example, changing ",Object(a.b)("inlineCode",{parentName:"p"},"subDelete")," to ",Object(a.b)("inlineCode",{parentName:"p"},"true")," won't work unless, ",Object(a.b)("inlineCode",{parentName:"p"},"delete")," is ",Object(a.b)("inlineCode",{parentName:"p"},"true"),".")),Object(a.b)("h3",{id:"changing-crud-configuration-per-type"},"Changing CRUD configuration per type"),Object(a.b)("p",null,"Generator config applies the config to all the types in your schema.\nGraphback allows you to change these for any single type using annotations."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-graphql"}),'"""\n@model\n@crud.create: false\n"""\ntype User {\n  ....\n}\n')),Object(a.b)("p",null,"or to enable it:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-graphql"}),'"""\n@crud.create\n"""\ntype User {\n  ....\n}\n')),Object(a.b)("h4",{id:"available-options"},"Available Options"),Object(a.b)("p",null,"All config options can be replicated by specifying the ",Object(a.b)("inlineCode",{parentName:"p"},"@crud.")," prefix"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"@crud.create: true\n@crud.update: true\n@crud.delete: true\n@crud.find: true\n@crud.findAll: true\n@crud.subCreate: true\n@crud.subUpdate: true\n@crud.subDelete: true\n")),Object(a.b)("p",null,"You can use these annotations to have more control over individual elements. For example:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),'"""\n@model\n@crud.delete\n"""\ntype Note {\n  ...\n}\n')),Object(a.b)("p",null,"will create the ",Object(a.b)("inlineCode",{parentName:"p"},"delete")," mutation for ",Object(a.b)("inlineCode",{parentName:"p"},"Note")," type."),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},Object(a.b)("strong",{parentName:"p"},"Note"),": Annotations override the configuration values in ",Object(a.b)("inlineCode",{parentName:"p"},".graphqlrc.yml"),".")),Object(a.b)("h2",{id:"database-migrations"},"Database Migrations"),Object(a.b)("p",null,"Graphback can migrate your database structure using your GraphQL schema."),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"Note: Full database migration support is currently only supported for PostgreSQL databases. See ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"../db/dbintroduction#compatibility"}),"Database Compatibility"),".")),Object(a.b)("p",null,"To enable migrations to work, add the ",Object(a.b)("inlineCode",{parentName:"p"},"dbmigrations")," extension to your ",Object(a.b)("inlineCode",{parentName:"p"},".graphqlrc.yml")," file:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"...\nextensions:\n  # Graphback configuration\n  graphback:\n    ...\n  ## graphql-migration config that can be also used in application\n  ## Please do not connect it to shared database as Graphback will automatically \n  ## execute dlls statements that can affect other applications.\n  dbmigrations:\n    ## See knex.js for db specific config format\n    client: pg\n    connection:\n      user: postgresql\n      password: postgres\n      database: users\n      host: localhost\n      port: 55432\n")))}p.isMDXComponent=!0},220:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var r=n(0),o=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=o.a.createContext({}),p=function(e){var t=o.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i({},t,{},e)),n},s=function(e){var t=p(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},f=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,l=u(e,["components","mdxType","originalType","parentName"]),s=p(n),f=r,d=s["".concat(c,".").concat(f)]||s[f]||b[f]||a;return n?o.a.createElement(d,i({ref:t},l,{components:n})):o.a.createElement(d,i({ref:t},l))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,c=new Array(a);c[0]=f;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i.mdxType="string"==typeof e?e:r,c[1]=i;for(var l=2;l<a;l++)c[l]=n[l];return o.a.createElement.apply(null,c)}return o.a.createElement.apply(null,n)}f.displayName="MDXCreateElement"},221:function(e,t,n){"use strict";e.exports=n(222)},222:function(e,t,n){"use strict";var r=n(223),o="function"==typeof Symbol&&Symbol.for,a=o?Symbol.for("react.element"):60103,c=o?Symbol.for("react.portal"):60106,i=o?Symbol.for("react.fragment"):60107,u=o?Symbol.for("react.strict_mode"):60108,l=o?Symbol.for("react.profiler"):60114,p=o?Symbol.for("react.provider"):60109,s=o?Symbol.for("react.context"):60110,b=o?Symbol.for("react.forward_ref"):60112,f=o?Symbol.for("react.suspense"):60113,d=o?Symbol.for("react.memo"):60115,h=o?Symbol.for("react.lazy"):60116,m="function"==typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O={};function j(e,t,n){this.props=e,this.context=t,this.refs=O,this.updater=n||g}function v(){}function k(e,t,n){this.props=e,this.context=t,this.refs=O,this.updater=n||g}j.prototype.isReactComponent={},j.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},j.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=j.prototype;var C=k.prototype=new v;C.constructor=k,r(C,j.prototype),C.isPureReactComponent=!0;var w={current:null},N=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,o={},c=null,i=null;if(null!=t)for(r in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(c=""+t.key),t)N.call(t,r)&&!x.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var l=Array(u),p=0;p<u;p++)l[p]=arguments[p+2];o.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:a,type:e,key:c,ref:i,props:o,_owner:w.current}}function P(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var E=/\/+/g,q=[];function _(e,t,n,r){if(q.length){var o=q.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function D(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>q.length&&q.push(e)}function R(e,t,n){return null==e?0:function e(t,n,r,o){var i=typeof t;"undefined"!==i&&"boolean"!==i||(t=null);var u=!1;if(null===t)u=!0;else switch(i){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case a:case c:u=!0}}if(u)return r(o,t,""===n?"."+G(t,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(t))for(var l=0;l<t.length;l++){var p=n+G(i=t[l],l);u+=e(i,p,r,o)}else if(null===t||"object"!=typeof t?p=null:p="function"==typeof(p=m&&t[m]||t["@@iterator"])?p:null,"function"==typeof p)for(t=p.call(t),l=0;!(i=t.next()).done;)u+=e(i=i.value,p=n+G(i,l++),r,o);else if("object"===i)throw r=""+t,Error(y(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return u}(e,"",t,n)}function G(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function $(e,t){e.func.call(e.context,t,e.count++)}function A(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?T(e,r,n,(function(e){return e})):null!=e&&(P(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(E,"$&/")+"/")+n)),r.push(e))}function T(e,t,n,r,o){var a="";null!=n&&(a=(""+n).replace(E,"$&/")+"/"),R(e,A,t=_(t,a,r,o)),D(t)}var U={current:null};function L(){var e=U.current;if(null===e)throw Error(y(321));return e}var M={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return T(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;R(e,$,t=_(null,null,t,n)),D(t)},count:function(e){return R(e,(function(){return null}),null)},toArray:function(e){var t=[];return T(e,t,null,(function(e){return e})),t},only:function(e){if(!P(e))throw Error(y(143));return e}},t.Component=j,t.Fragment=i,t.Profiler=l,t.PureComponent=k,t.StrictMode=u,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,n){if(null==e)throw Error(y(267,e));var o=r({},e.props),c=e.key,i=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,u=w.current),void 0!==t.key&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(p in t)N.call(t,p)&&!x.hasOwnProperty(p)&&(o[p]=void 0===t[p]&&void 0!==l?l[p]:t[p])}var p=arguments.length-2;if(1===p)o.children=n;else if(1<p){l=Array(p);for(var s=0;s<p;s++)l[s]=arguments[s+2];o.children=l}return{$$typeof:a,type:e.type,key:c,ref:i,props:o,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:p,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:b,render:e}},t.isValidElement=P,t.lazy=function(e){return{$$typeof:h,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return L().useCallback(e,t)},t.useContext=function(e,t){return L().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return L().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return L().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return L().useLayoutEffect(e,t)},t.useMemo=function(e,t){return L().useMemo(e,t)},t.useReducer=function(e,t,n){return L().useReducer(e,t,n)},t.useRef=function(e){return L().useRef(e)},t.useState=function(e){return L().useState(e)},t.version="16.13.1"},223:function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function c(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,t){for(var n,i,u=c(e),l=1;l<arguments.length;l++){for(var p in n=Object(arguments[l]))o.call(n,p)&&(u[p]=n[p]);if(r){i=r(n);for(var s=0;s<i.length;s++)a.call(n,i[s])&&(u[i[s]]=n[i[s]])}}return u}}}]);