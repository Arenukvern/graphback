<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Creating your own plugin · Graphback</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Graphback allows to create your own plugins that can affect generated schema "/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Creating your own plugin · Graphback"/><meta property="og:type" content="website"/><meta property="og:url" content="https://graphback.dev/"/><meta property="og:description" content="Graphback allows to create your own plugins that can affect generated schema "/><meta property="og:image" content="https://graphback.dev/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://graphback.dev/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://graphback.dev/blog/atom.xml" title="Graphback Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://graphback.dev/blog/feed.xml" title="Graphback Blog RSS Feed"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script type="text/javascript" src="https://kit.fontawesome.com/48d4048ec6.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/favicon.ico" alt="Graphback"/><h2 class="headerTitleWithLogo">Graphback</h2></a><a href="/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/next/gettingstarted" target="_self">Documentation</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Generator Plugins</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Introduction<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/gettingstarted">What is Graphback</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/intro/quickstart">Create a new app</a></li><li class="navListItem"><a class="navItem" href="/docs/next/intro/existingproject">Add to existing project</a></li><li class="navListItem"><a class="navItem" href="/docs/next/intro/serverless">In-memory API</a></li><li class="navListItem"><a class="navItem" href="/docs/next/intro/datamodel">Data Model</a></li><li class="navListItem"><a class="navItem" href="/docs/next/intro/config">Config</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">CRUD<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/crud/crudspec">CRUD Specification</a></li><li class="navListItem"><a class="navItem" href="/docs/next/crud/crudruntime">CRUD Abstraction</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Generator Plugins<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/plugins/plugin-intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/plugins/crud-schema">CRUD Schema</a></li><li class="navListItem"><a class="navItem" href="/docs/next/plugins/crud-resolvers">CRUD Resolvers</a></li><li class="navListItem"><a class="navItem" href="/docs/next/plugins/crud-client">CRUD Client Queries</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/next/plugins/customplugin">Custom plugin</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Database<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/db/dbintroduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/db/datasources">Data Sources</a></li><li class="navListItem"><a class="navItem" href="/docs/next/db/dbmigrations">Migrations</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Migrating to Graphback<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/migrations/intromigrations">Migrate To Graphback</a></li><li class="navListItem"><a class="navItem" href="/docs/next/migrations/openapi">OpenAPI migrations</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/commands">CLI commands</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Releases<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/releases">Releases</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Creating your own plugin</h1></header><article><div><span><p>Graphback allows to create your own plugins that can affect generated schema
and create files in filesystem.</p>
<p>Each plugin needs to be a new npm package that will implement GraphbackPlugin.</p>
<h2><a class="anchor" aria-hidden="true" id="building-your-plugin"></a><a href="#building-your-plugin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Building your plugin</h2>
<p>Graphback plugins are executed in the order they are defined in the configuration.
<code>transformSchema</code> is called first for each plugin to determine final shape of the schema.
Then <code>createResources</code> method is called that can create files etc.</p>
<p>Example plugin implementation should look as follows:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { GraphbackPlugin, GraphbackCoreMetadata } <span class="hljs-keyword">from</span> <span class="hljs-string">'@graphback/core'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> YourPlugin <span class="hljs-keyword">extends</span> GraphbackPlugin {
    <span class="hljs-keyword">private</span> pluginConfig: <span class="hljs-built_in">any</span>;

    <span class="hljs-comment">// Constructor needs to accept single argument - plugin config</span>
    <span class="hljs-keyword">constructor</span>(<span class="hljs-params">pluginConfig?: <span class="hljs-built_in">any</span></span>) {
        <span class="hljs-keyword">super</span>();
        <span class="hljs-keyword">this</span>.pluginConfig = pluginConfig;
    }

    <span class="hljs-keyword">public</span> transformSchema(metadata: GraphbackCoreMetadata) {
        <span class="hljs-comment">// This method can be used to add or remove elements from current schema.</span>
        <span class="hljs-keyword">return</span> metadata.getSchema();
    }

    <span class="hljs-keyword">public</span> createResources(metadata: GraphbackCoreMetadata): <span class="hljs-built_in">void</span> {
        <span class="hljs-comment">// This method is used to create files in filesystem based on the models</span>
        metadata.getModelDefinitions().forEach(<span class="hljs-function"><span class="hljs-params">model</span> =&gt;</span> {
            writeFileSync(<span class="hljs-string">`<span class="hljs-subst">${process.cwd()}</span>/<span class="hljs-subst">${model.graphqlType.name}</span>.js`</span>, <span class="hljs-string">`const def = '<span class="hljs-subst">${model.graphqlType.getFields()}</span>'`</span>)
        })
    }

    <span class="hljs-keyword">public</span> getPluginName(): <span class="hljs-built_in">string</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'MyPlugin'</span>;
    }
}

<span class="hljs-comment">// Package needs to export created plugin as `Plugin`</span>
<span class="hljs-keyword">export</span> { ClientCRUDPlugin <span class="hljs-keyword">as</span> Plugin } <span class="hljs-keyword">from</span> <span class="hljs-string">'./ClientCRUDPlugin'</span>
</code></pre>
<blockquote>
<p>NOTE: Plugin name cannot start with <code>graphback-</code> as this name is reserved for graphback internal plugins</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="plugin-configuration"></a><a href="#plugin-configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Plugin configuration</h2>
<p>Plugins are loaded using CommonJS 'require' method based on the Graphback plugin section.
Order of the plugins matter especially when transforming schema.
If your plugin relies on other plugins, it should be placed on the bottom of the list.
Each plugin should have its own configuration embedded as follows:</p>
<pre><code class="hljs css language-yaml">  <span class="hljs-attr">graphback:</span>
    <span class="hljs-comment">## Codegen plugins</span>
    <span class="hljs-attr">plugins:</span>
        <span class="hljs-attr">my-plugin:</span>
          <span class="hljs-attr">format:</span> <span class="hljs-string">'graphql'</span>
          <span class="hljs-attr">outputPath:</span> <span class="hljs-string">./server/src/schema</span>
        <span class="hljs-attr">graphback-client:</span>
          <span class="hljs-attr">format:</span> <span class="hljs-string">'graphql'</span>
          <span class="hljs-attr">outputPath:</span> <span class="hljs-string">./client/src/graphql</span>
        <span class="hljs-attr">graphback-resolvers:</span>
          <span class="hljs-attr">format:</span> <span class="hljs-string">ts</span>
          <span class="hljs-attr">outputPath:</span> <span class="hljs-string">./server/src/resolvers</span>

</code></pre>
<blockquote>
<p>NOTE: Graphback CLI includes Graphback core plugin. When adding your own plugins, you need to run Graphback CLI from your npm scripts
for the Graphback engine to be able to pick up the plugin package.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="plugins-helper"></a><a href="#plugins-helper" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Plugins helper</h2>
<p>'@graphback/core' offers helpers for building plugins.
Please refer to the package documentation for more details.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/next/plugins/crud-client"><span class="arrow-prev">← </span><span>CRUD Client Queries</span></a><a class="docs-next button" href="/docs/next/db/dbintroduction"><span>Introduction</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#building-your-plugin">Building your plugin</a></li><li><a href="#plugin-configuration">Plugin configuration</a></li><li><a href="#plugins-helper">Plugins helper</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2020 Graphback Contributors</section></footer></div></body></html>