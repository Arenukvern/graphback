<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Serve GraphQL API without code · Graphback</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Graphback allows you to add GraphQL API without code generation."/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Serve GraphQL API without code · Graphback"/><meta property="og:type" content="website"/><meta property="og:url" content="https://graphback.dev/"/><meta property="og:description" content="Graphback allows you to add GraphQL API without code generation."/><meta property="og:image" content="https://graphback.dev/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://graphback.dev/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://graphback.dev/blog/atom.xml" title="Graphback Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://graphback.dev/blog/feed.xml" title="Graphback Blog RSS Feed"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script type="text/javascript" src="https://kit.fontawesome.com/48d4048ec6.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/favicon.ico" alt="Graphback"/><h2 class="headerTitleWithLogo">Graphback</h2></a><a href="/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/next/gettingstarted" target="_self">Documentation</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Getting Started</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Introduction<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/gettingstarted">What is Graphback</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/intro/quickstart">Create a new app</a></li><li class="navListItem"><a class="navItem" href="/docs/next/intro/existingproject">Add to existing project</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/next/intro/serverless">In-memory API</a></li><li class="navListItem"><a class="navItem" href="/docs/next/intro/datamodel">Data Model</a></li><li class="navListItem"><a class="navItem" href="/docs/next/intro/config">Config</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">CRUD<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/crud/crudspec">CRUD Specification</a></li><li class="navListItem"><a class="navItem" href="/docs/next/crud/crudruntime">CRUD Abstraction</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Generator Plugins<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/plugins/plugin-intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/plugins/crud-schema">CRUD Schema</a></li><li class="navListItem"><a class="navItem" href="/docs/next/plugins/crud-resolvers">CRUD Resolvers</a></li><li class="navListItem"><a class="navItem" href="/docs/next/plugins/crud-client">CRUD Client Queries</a></li><li class="navListItem"><a class="navItem" href="/docs/next/plugins/customplugin">Custom plugin</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Database<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/db/dbintroduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/db/datasources">Data Sources</a></li><li class="navListItem"><a class="navItem" href="/docs/next/db/dbmigrations">Migrations</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Migrating to Graphback<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/migrations/intromigrations">Migrate To Graphback</a></li><li class="navListItem"><a class="navItem" href="/docs/next/migrations/openapi">OpenAPI migrations</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/commands">CLI commands</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Releases<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/releases">Releases</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Serve GraphQL API without code</h1></header><article><div><span><p>Graphback allows you to add GraphQL API without code generation.
Graphback package can be imported and used directly from your code or serverless handlers.
Schema and resolvers can be created when your application code is executed and used to create instance of Apollo or GraphQL-js server</p>
<h2><a class="anchor" aria-hidden="true" id="adding-runtime-layer-to-your-application"></a><a href="#adding-runtime-layer-to-your-application" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding runtime layer to your application</h2>
<p>To create GraphQL Layer at runtime developers need to initialize <code>GraphbackRuntime</code> instance as follows:</p>
<pre><code class="hljs css language-ts">
    <span class="hljs-keyword">import</span> { GraphbackRuntime, ModelDefinition, PgKnexDBDataProvider } <span class="hljs-keyword">from</span> <span class="hljs-string">'graphback'</span>
    <span class="hljs-keyword">import</span> { PubSub } <span class="hljs-keyword">from</span> <span class="hljs-string">'graphql-subscriptions'</span>;

    <span class="hljs-comment">// Create provider using knex</span>
    <span class="hljs-keyword">class</span> PostgreSQLRuntime <span class="hljs-keyword">extends</span> GraphbackRuntime {
      db: Knex&lt;<span class="hljs-built_in">any</span>, <span class="hljs-built_in">any</span>[]&gt;;

      <span class="hljs-keyword">constructor</span>(<span class="hljs-params">schema: <span class="hljs-built_in">string</span>, config: GraphbackGeneratorConfig, db: Knex</span>) {
        <span class="hljs-keyword">super</span>(schema, config);
        <span class="hljs-keyword">this</span>.db = db;
      }

      <span class="hljs-keyword">protected</span> createDBProvider(model: ModelDefinition) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> PgKnexDBDataProvider(model.graphqlType, <span class="hljs-keyword">this</span>.db);
      }
    }

    <span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> Knex(...);
    <span class="hljs-keyword">const</span> graphbackOptions = {...}
    <span class="hljs-keyword">const</span> schemaText = <span class="hljs-string">`type Test ...`</span>

    <span class="hljs-keyword">const</span> pubSub = <span class="hljs-keyword">new</span> PubSub();
    <span class="hljs-keyword">const</span> serviceOverrides = {}
    <span class="hljs-keyword">const</span> runtimeEngine = <span class="hljs-keyword">new</span> PostgreSQLRuntime(schemaText, graphbackConfig, client);
    <span class="hljs-keyword">const</span> runtime = runtimeEngine.buildRuntime(pubSub, {});

  <span class="hljs-keyword">const</span> executableSchema = makeExecutableSchema({
    typeDefs: printSchema(runtime.schema),
    resolvers: runtime.resolvers,
    resolverValidationOptions: {
      requireResolversForResolveType: <span class="hljs-literal">false</span>
    }
  });
</code></pre>
<p>See our <a href="https://github.com/aerogear/graphback/blob/master/templates/ts-apollo-runtime-backend/src/runtime.ts"><code>ts-apollo-runtime-backend</code></a> for a fully functional example.</p>
<h3><a class="anchor" aria-hidden="true" id="graphbackdataprovider"></a><a href="#graphbackdataprovider" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GraphbackDataProvider</h3>
<p>Graphback provides following implementations of GraphbackDataProvider</p>
<ul>
<li>KnexDBDataProvider (<code>@graphback/runtime-knex</code>)</li>
<li>PgKnexDBDataProvider (PostgreSQL version from <code>@graphback/runtime-knex</code>)</li>
<li>MongoDBDataProvider (<code>@graphback/runtime-mongodb</code>)</li>
</ul>
<p>Your resolvers can use different data providers thanks to swapping implementation in resolver context</p>
<h2><a class="anchor" aria-hidden="true" id="using-different-datasource"></a><a href="#using-different-datasource" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using different DataSource</h2>
<p>Runtime is created using default CRUDService instance and KnexDBDataProvider db layer to retrieve the data.
Developers can override implementations for those when different datasource is used.</p>
<p>See <a href="https://github.com/aerogear/graphback/tree/master/templates/ts-apollo-runtime-backend"><code>runtime example application</code></a>
for more information.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/next/intro/existingproject"><span class="arrow-prev">← </span><span>Add to existing project</span></a><a class="docs-next button" href="/docs/next/intro/datamodel"><span>Data Model</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#adding-runtime-layer-to-your-application">Adding runtime layer to your application</a><ul class="toc-headings"><li><a href="#graphbackdataprovider">GraphbackDataProvider</a></li></ul></li><li><a href="#using-different-datasource">Using different DataSource</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2020 Graphback Contributors</section></footer></div></body></html>