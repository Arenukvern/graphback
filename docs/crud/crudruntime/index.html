<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.53">


<title data-react-helmet="true">CRUD Runtime Abstraction | Graphback</title>

<meta data-react-helmet="true" name="docsearch:version" content="0.12.x"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="CRUD Runtime Abstraction | Graphback"><meta data-react-helmet="true" name="description" content="A Graphback CRUD abstraction is available as part of the `@graphback/runtime` package, providing a way to programatically define different datasources and configure them without code generation."><meta data-react-helmet="true" property="og:description" content="A Graphback CRUD abstraction is available as part of the `@graphback/runtime` package, providing a way to programatically define different datasources and configure them without code generation."><meta data-react-helmet="true" property="og:url" content="https://graphback.dev/docs/crud/crudruntime">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico">


<link rel="stylesheet" href="/styles.23f5c4f4.css">


<link rel="preload" href="/styles.196047f3.js" as="script">

<link rel="preload" href="/runtime~main.5ae1c6d9.js" as="script">

<link rel="preload" href="/main.fc1e994d.js" as="script">

<link rel="preload" href="/1.9fd1d6a4.js" as="script">

<link rel="preload" href="/2.0134b513.js" as="script">

<link rel="preload" href="/116.2cd0ebc3.js" as="script">

<link rel="preload" href="/20ac7829.27861019.js" as="script">

<link rel="preload" href="/17896441.7a7c5c13.js" as="script">

<link rel="preload" href="/25b4ec6f.85782fae.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="Graphback Logo"><strong class="navbar__title">Graphback</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/gettingstarted">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/gettingstarted">0.12.x</a></li><li><a class="dropdown__link" href="/docs/0.11.x/gettingstarted">0.11.x</a></li><li><a class="dropdown__link" href="/docs/0.10.x/gettingstarted">0.10.x</a></li><li><a class="dropdown__link" href="/docs/0.9.x/gettingstarted">0.9.x</a></li><li><a class="dropdown__link" href="/docs/next/gettingstarted">Master/Unreleased</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/versions">v0.12.x</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/aerogear/graphback" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="Graphback Logo"><strong class="navbar__title">Graphback</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--sublist navbar__link--active" position="left" href="/docs/gettingstarted">Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/gettingstarted">0.12.x</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.11.x/gettingstarted">0.11.x</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.10.x/gettingstarted">0.10.x</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.9.x/gettingstarted">0.9.x</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gettingstarted">Master/Unreleased</a></li></ul></li><li class="menu__list-item"><a class="menu__link" position="right" href="/versions">v0.12.x</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/aerogear/graphback" class="menu__link" position="right">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gettingstarted">What is Graphback</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro/quickstart">Create a new app</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro/existingproject">Add to existing project</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro/serverless">Runtime API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro/graphqlserve">API without code</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro/datamodel">Data Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro/config">Config</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">CRUD</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/crud/crudspec">CRUD Specification</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" tabindex="0" href="/docs/crud/crudruntime">CRUD Abstraction</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Generator Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugins/plugin-intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugins/crud-schema">CRUD Schema</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugins/crud-resolvers">CRUD Resolvers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugins/crud-client">CRUD Client Queries</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugins/customplugin">Custom plugin</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Database</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/db/dbintroduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/db/datasources">Data Sources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/db/dbmigrations">Migrations</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Migrating to Graphback</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/migrations/openapi">Migrating from REST</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/commands">CLI commands</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Releases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/releases">Releases</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><div><span class="badge badge--secondary">Version: 0.12.x</span></div><header><h1 class="docTitle_1vWb">CRUD Runtime Abstraction</h1></header><div class="markdown"><p>A Graphback CRUD abstraction is available as part of the <code>@graphback/runtime</code> package, providing a way to programatically define different datasources and configure them without code generation.</p><p>Runtime is abstracted into two interfaces:</p><ul><li><code>GraphbackCRUDService</code>: layer that wraps data provider, can implement custom behaviour like subscriptions or live queries</li><li><code>GraphbackDataProvider</code>: data access layer </li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="graphbackcrudservice"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#graphbackcrudservice" title="Direct link to heading">#</a>GraphbackCRUDService</h3><p>Graphback provides the following implementations of <code>GraphbackCRUDService</code></p><ul><li><code>CRUDService</code>: implements subscriptions and logging. Used by default in resolver generator</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="graphbackdataprovider"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#graphbackdataprovider" title="Direct link to heading">#</a>GraphbackDataProvider</h3><p>Graphback provides the following implementations of <code>GraphbackDataProvider</code>:</p><ul><li><a href="https://www.npmjs.com/package/@graphback/runtime-knex"><code>PgKnexDBDataProvider</code></a>: PostgreSQL data provider using <a href="http://knexjs.org/">Knex.js</a></li><li><a href="https://www.npmjs.com/package/@graphback/runtime-mongo"><code>MongoDBDataProvider</code></a>: Data provider for MongoDB</li><li><a href="https://www.npmjs.com/package/@graphback/runtime-knex"><code>KnexDBDataProvider</code></a>: Data provider using <a href="http://knexjs.org/">Knex.js</a></li></ul><p>Your resolvers can use any of these data providers by swapping the implementation and attaching it to your application context. See <a href="/docs/db/datasources">Data Sources</a> to learn how.</p><p><img src="/img/runtime.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="adding-custom-resolvers-to-runtime"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#adding-custom-resolvers-to-runtime" title="Direct link to heading">#</a>Adding custom resolvers to runtime</h2><p>Runtime layer will come with autogenerated schema that will also include custom resolvers provided in model.
Developers can append their custom resolvers to resolver array to extend runtime layer.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="how-runtime-relates-to-the-resolvers"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-runtime-relates-to-the-resolvers" title="Direct link to heading">#</a>How Runtime relates to the resolvers</h2><p>Graphback resolver generator plugin generates resolvers that utilize one of the preconfigured <code>GraphbackCRUDService</code> implementations.
<code>GraphbackCRUDService</code> implementation is using <code>GraphbackDataProvider</code>.</p><p><img src="/img/runtime.png"></p><p>Instances need to be added to <code>context</code> object in resolver for example:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token function-variable function" style="color:#d73a49">findAllComments</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">parent</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> args</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Comment is an implementation of `GraphbackCRUDService` </span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Comment</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">findAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="why-we-need-crud-abstraction"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#why-we-need-crud-abstraction" title="Direct link to heading">#</a>Why we need CRUD Abstraction</h2><p>Code generators produce a large amount of the code that needs to be maintained later.
Having generator code diverging from original form will prevent developers from utilizing generators.
Graphback tries to address many challenging issues like data caching, batching, consistency etc. that will be hard to implement and test by utilizing only code generation.
That is why our default resolver generators rely on CRUD abstraction layer that can be used to connect Graphback to any datasource without writing generator plugin.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/aerogear/graphback/edit/master/website/versioned_docs/version-0.12.x/crud/crudruntime.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/crud/crudspec"><div class="pagination-nav__link--sublabel">Previous</div><div class="pagination-nav__link--label">« Graphback CRUD Specification</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/plugins/plugin-intro"><div class="pagination-nav__link--sublabel">Next</div><div class="pagination-nav__link--label">Graphback Plugins introduction »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#graphbackcrudservice" class="contents__link">GraphbackCRUDService</a></li><li><a href="#graphbackdataprovider" class="contents__link">GraphbackDataProvider</a></li><li><a href="#adding-custom-resolvers-to-runtime" class="contents__link">Adding custom resolvers to runtime</a></li><li><a href="#how-runtime-relates-to-the-resolvers" class="contents__link">How Runtime relates to the resolvers</a></li><li><a href="#why-we-need-crud-abstraction" class="contents__link">Why we need CRUD Abstraction</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/gettingstarted">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/intro/quickstart">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/crud/crudspec">CRUD</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/plugins/plugin-intro">Plugins</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/migrations/openapi">Migrations</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/commands">Reference</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/releases">Releases</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/aerogear/graphback">GitHub</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://discordapp.com/invite/mJ7j84m">Discord</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><a href="https://aerogear.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_1Wg7"><img class="footer__logo" alt="AeroGear Logo" src="/img/aerogear.png"></a></div><div>Copyright © 2020 AeroGear</div></div></div></footer>
</div>

<script src="/styles.196047f3.js"></script>

<script src="/runtime~main.5ae1c6d9.js"></script>

<script src="/main.fc1e994d.js"></script>

<script src="/1.9fd1d6a4.js"></script>

<script src="/2.0134b513.js"></script>

<script src="/116.2cd0ebc3.js"></script>

<script src="/20ac7829.27861019.js"></script>

<script src="/17896441.7a7c5c13.js"></script>

<script src="/25b4ec6f.85782fae.js"></script>


</body>
</html>