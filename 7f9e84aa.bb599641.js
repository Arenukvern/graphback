/*! For license information please see 7f9e84aa.bb599641.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{156:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return u})),t.d(n,"metadata",(function(){return i})),t.d(n,"rightToc",(function(){return c})),t.d(n,"default",(function(){return p}));var r=t(1),o=t(6),a=(t(225),t(224)),u={id:"customplugin",title:"Creating your own plugin",sidebar_label:"Custom plugin"},i={id:"plugins/customplugin",isDocsHomePage:!1,title:"Creating your own plugin",description:"Graphback allows to create your own plugins that can affect generated schema",source:"@site/../docs/plugins/creating-plugin.md",permalink:"/docs/next/plugins/customplugin",editUrl:"https://github.com/aerogear/graphback/edit/master/website/../docs/plugins/creating-plugin.md",version:"next",sidebar_label:"Custom plugin",sidebar:"docs",previous:{title:"Graphback CRUD Client Queries Plugin",permalink:"/docs/next/plugins/crud-client"},next:{title:"Authentication and authorization for Graphback",permalink:"/docs/next/authentication/authinto"},latestVersionMainDocPermalink:"/docs/gettingstarted"},c=[{value:"Building your plugin",id:"building-your-plugin",children:[]},{value:"Plugin configuration",id:"plugin-configuration",children:[]},{value:"Plugins helper",id:"plugins-helper",children:[]}],l={rightToc:c};function p(e){var n=e.components,t=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Graphback allows to create your own plugins that can affect generated schema\nand create files in filesystem."),Object(a.b)("p",null,"Each plugin needs to be a new npm package that will implement GraphbackPlugin."),Object(a.b)("h2",{id:"building-your-plugin"},"Building your plugin"),Object(a.b)("p",null,"Graphback plugins are executed in the order they are defined in the configuration.\n",Object(a.b)("inlineCode",{parentName:"p"},"transformSchema")," is called first for each plugin to determine final shape of the schema.\nThen ",Object(a.b)("inlineCode",{parentName:"p"},"createResources")," method is called that can create files etc."),Object(a.b)("p",null,"Example plugin implementation should look as follows:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-ts"}),"import { GraphbackPlugin, GraphbackCoreMetadata } from '@graphback/core';\n\nexport class YourPlugin extends GraphbackPlugin {\n    private pluginConfig: any;\n\n    // Constructor needs to accept single argument - plugin config\n    constructor(pluginConfig?: any) {\n        super();\n        this.pluginConfig = pluginConfig;\n    }\n\n    public transformSchema(metadata: GraphbackCoreMetadata) {\n        // This method can be used to add or remove elements from current schema.\n        return metadata.getSchema();\n    }\n\n    public createResources(metadata: GraphbackCoreMetadata): void {\n        // This method is used to create files in filesystem based on the models\n        metadata.getModelDefinitions().forEach(model => {\n            writeFileSync(`${process.cwd()}/${model.graphqlType.name}.js`, `const def = '${model.graphqlType.getFields()}'`)\n        })\n    }\n\n    public getPluginName(): string {\n        return 'MyPlugin';\n    }\n}\n\n// Package needs to export created plugin as `Plugin`\nexport { ClientCRUDPlugin as Plugin } from './ClientCRUDPlugin'\n")),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"NOTE: Plugin name cannot start with ",Object(a.b)("inlineCode",{parentName:"p"},"graphback-")," as this name is reserved for graphback internal plugins")),Object(a.b)("h2",{id:"plugin-configuration"},"Plugin configuration"),Object(a.b)("p",null,"Plugins are loaded using CommonJS 'require' method based on the Graphback plugin section.\nOrder of the plugins matter especially when transforming schema.\nIf your plugin relies on other plugins, it should be placed on the bottom of the list.\nEach plugin should have its own configuration embedded as follows:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"  graphback:\n    ## Codegen plugins\n    plugins:\n        my-plugin:\n          format: 'graphql'\n          outputPath: ./server/src/schema\n        graphback-client:\n          format: 'graphql'\n          outputPath: ./client/src/graphql\n\n")),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"NOTE: Graphback CLI includes Graphback core plugin. When adding your own plugins, you need to run Graphback CLI from your npm scripts\nfor the Graphback engine to be able to pick up the plugin package.")),Object(a.b)("h2",{id:"plugins-helper"},"Plugins helper"),Object(a.b)("p",null,"'@graphback/core' offers helpers for building plugins.\nPlease refer to the package documentation for more details."))}p.isMDXComponent=!0},224:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return g}));var r=t(0),o=t.n(r);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=o.a.createContext({}),p=function(e){var n=o.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i({},n,{},e)),t},s=function(e){var n=p(e.components);return o.a.createElement(l.Provider,{value:n},e.children)},f={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},d=Object(r.forwardRef)((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,u=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),s=p(t),d=r,g=s["".concat(u,".").concat(d)]||s[d]||f[d]||a;return t?o.a.createElement(g,i({ref:n},l,{components:t})):o.a.createElement(g,i({ref:n},l))}));function g(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,u=new Array(a);u[0]=d;var i={};for(var c in n)hasOwnProperty.call(n,c)&&(i[c]=n[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,u[1]=i;for(var l=2;l<a;l++)u[l]=t[l];return o.a.createElement.apply(null,u)}return o.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},225:function(e,n,t){"use strict";e.exports=t(226)},226:function(e,n,t){"use strict";var r=t(227),o="function"==typeof Symbol&&Symbol.for,a=o?Symbol.for("react.element"):60103,u=o?Symbol.for("react.portal"):60106,i=o?Symbol.for("react.fragment"):60107,c=o?Symbol.for("react.strict_mode"):60108,l=o?Symbol.for("react.profiler"):60114,p=o?Symbol.for("react.provider"):60109,s=o?Symbol.for("react.context"):60110,f=o?Symbol.for("react.forward_ref"):60112,d=o?Symbol.for("react.suspense"):60113,g=o?Symbol.for("react.memo"):60115,b=o?Symbol.for("react.lazy"):60116,m="function"==typeof Symbol&&Symbol.iterator;function h(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function O(e,n,t){this.props=e,this.context=n,this.refs=v,this.updater=t||y}function j(){}function k(e,n,t){this.props=e,this.context=n,this.refs=v,this.updater=t||y}O.prototype.isReactComponent={},O.prototype.setState=function(e,n){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(h(85));this.updater.enqueueSetState(this,e,n,"setState")},O.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},j.prototype=O.prototype;var w=k.prototype=new j;w.constructor=k,r(w,O.prototype),w.isPureReactComponent=!0;var P={current:null},C=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function x(e,n,t){var r,o={},u=null,i=null;if(null!=n)for(r in void 0!==n.ref&&(i=n.ref),void 0!==n.key&&(u=""+n.key),n)C.call(n,r)&&!S.hasOwnProperty(r)&&(o[r]=n[r]);var c=arguments.length-2;if(1===c)o.children=t;else if(1<c){for(var l=Array(c),p=0;p<c;p++)l[p]=arguments[p+2];o.children=l}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===o[r]&&(o[r]=c[r]);return{$$typeof:a,type:e,key:u,ref:i,props:o,_owner:P.current}}function E(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var _=/\/+/g,$=[];function R(e,n,t,r){if($.length){var o=$.pop();return o.result=e,o.keyPrefix=n,o.func=t,o.context=r,o.count=0,o}return{result:e,keyPrefix:n,func:t,context:r,count:0}}function T(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>$.length&&$.push(e)}function N(e,n,t){return null==e?0:function e(n,t,r,o){var i=typeof n;"undefined"!==i&&"boolean"!==i||(n=null);var c=!1;if(null===n)c=!0;else switch(i){case"string":case"number":c=!0;break;case"object":switch(n.$$typeof){case a:case u:c=!0}}if(c)return r(o,n,""===t?"."+q(n,0):t),1;if(c=0,t=""===t?".":t+":",Array.isArray(n))for(var l=0;l<n.length;l++){var p=t+q(i=n[l],l);c+=e(i,p,r,o)}else if(null===n||"object"!=typeof n?p=null:p="function"==typeof(p=m&&n[m]||n["@@iterator"])?p:null,"function"==typeof p)for(n=p.call(n),l=0;!(i=n.next()).done;)c+=e(i=i.value,p=t+q(i,l++),r,o);else if("object"===i)throw r=""+n,Error(h(31,"[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r,""));return c}(e,"",n,t)}function q(e,n){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var n={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return n[e]}))}(e.key):n.toString(36)}function D(e,n){e.func.call(e.context,n,e.count++)}function G(e,n,t){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,n,e.count++),Array.isArray(e)?M(e,r,t,(function(e){return e})):null!=e&&(E(e)&&(e=function(e,n){return{$$typeof:a,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||n&&n.key===e.key?"":(""+e.key).replace(_,"$&/")+"/")+t)),r.push(e))}function M(e,n,t,r,o){var a="";null!=t&&(a=(""+t).replace(_,"$&/")+"/"),N(e,G,n=R(n,a,r,o)),T(n)}var I={current:null};function A(){var e=I.current;if(null===e)throw Error(h(321));return e}var U={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:P,IsSomeRendererActing:{current:!1},assign:r};n.Children={map:function(e,n,t){if(null==e)return e;var r=[];return M(e,r,null,n,t),r},forEach:function(e,n,t){if(null==e)return e;N(e,D,n=R(null,null,n,t)),T(n)},count:function(e){return N(e,(function(){return null}),null)},toArray:function(e){var n=[];return M(e,n,null,(function(e){return e})),n},only:function(e){if(!E(e))throw Error(h(143));return e}},n.Component=O,n.Fragment=i,n.Profiler=l,n.PureComponent=k,n.StrictMode=c,n.Suspense=d,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,n.cloneElement=function(e,n,t){if(null==e)throw Error(h(267,e));var o=r({},e.props),u=e.key,i=e.ref,c=e._owner;if(null!=n){if(void 0!==n.ref&&(i=n.ref,c=P.current),void 0!==n.key&&(u=""+n.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(p in n)C.call(n,p)&&!S.hasOwnProperty(p)&&(o[p]=void 0===n[p]&&void 0!==l?l[p]:n[p])}var p=arguments.length-2;if(1===p)o.children=t;else if(1<p){l=Array(p);for(var s=0;s<p;s++)l[s]=arguments[s+2];o.children=l}return{$$typeof:a,type:e.type,key:u,ref:i,props:o,_owner:c}},n.createContext=function(e,n){return void 0===n&&(n=null),(e={$$typeof:s,_calculateChangedBits:n,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:p,_context:e},e.Consumer=e},n.createElement=x,n.createFactory=function(e){var n=x.bind(null,e);return n.type=e,n},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:f,render:e}},n.isValidElement=E,n.lazy=function(e){return{$$typeof:b,_ctor:e,_status:-1,_result:null}},n.memo=function(e,n){return{$$typeof:g,type:e,compare:void 0===n?null:n}},n.useCallback=function(e,n){return A().useCallback(e,n)},n.useContext=function(e,n){return A().useContext(e,n)},n.useDebugValue=function(){},n.useEffect=function(e,n){return A().useEffect(e,n)},n.useImperativeHandle=function(e,n,t){return A().useImperativeHandle(e,n,t)},n.useLayoutEffect=function(e,n){return A().useLayoutEffect(e,n)},n.useMemo=function(e,n){return A().useMemo(e,n)},n.useReducer=function(e,n,t){return A().useReducer(e,n,t)},n.useRef=function(e){return A().useRef(e)},n.useState=function(e){return A().useState(e)},n.version="16.13.1"},227:function(e,n,t){"use strict";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function u(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(n).map((function(e){return n[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,n){for(var t,i,c=u(e),l=1;l<arguments.length;l++){for(var p in t=Object(arguments[l]))o.call(t,p)&&(c[p]=t[p]);if(r){i=r(t);for(var s=0;s<i.length;s++)a.call(t,i[s])&&(c[i[s]]=t[i[s]])}}return c}}}]);